#!/usr/bin/env python3
"""
Лабораторная работа №1
Вариант 21: f(x₁, x₂) = x₁ + x₂ - 1

Программа содержит две реализации функции:
1. Итеративную (imperative_function)
2. Рекурсивную на основе примитивной рекурсии (recursive_function)
"""


def imperative_function(x1, x2):
    """
    Итеративная реализация функции f(x₁, x₂) = x₁ + x₂ - 1

    Args:
        x1: первый аргумент
        x2: второй аргумент

    Returns:
        Результат вычисления x₁ + x₂ - 1
    """
    result = x1 + x2 - 1
    return result


# Базовые операторы примитивной рекурсии

def successor(x):
    """
    Функция следования S(x) = x + 1
    Базовый оператор примитивной рекурсии
    """
    return x + 1


def predecessor(x):
    """
    Функция предшествования pred(x) = x - 1
    Определяется через примитивную рекурсию:
    - pred(0) = 0 (базовый случай)
    - pred(S(x)) = x (рекурсивный случай)
    """
    if x == 0:
        return 0
    return x - 1


def add(x, y):
    """
    Функция сложения add(x, y) = x + y
    Определяется через примитивную рекурсию:
    - add(x, 0) = x (базовый случай)
    - add(x, S(y)) = S(add(x, y)) (рекурсивный случай)

    Т.е. складываем путем y-кратного применения функции следования к x
    """
    if y == 0:
        return x
    return successor(add(x, predecessor(y)))


def recursive_function(x1, x2):
    """
    Рекурсивная реализация функции f(x₁, x₂) = x₁ + x₂ - 1
    Использует операторы примитивной рекурсии

    Представление через примитивную рекурсию:
    f(x₁, x₂) = pred(add(x₁, x₂))

    где:
    - add(x₁, x₂) - рекурсивная функция сложения
    - pred(x) - функция предшествования

    Args:
        x1: первый аргумент
        x2: второй аргумент

    Returns:
        Результат вычисления x₁ + x₂ - 1
    """
    # Сначала складываем x₁ и x₂
    sum_result = add(x1, x2)
    # Затем вычитаем 1 (применяем функцию предшествования)
    result = predecessor(sum_result)
    return result


def main():
    """
    Главная функция программы
    Запрашивает у пользователя значения x₁ и x₂,
    вычисляет результат двумя способами и выводит результаты
    """
    try:
        # Ввод аргументов от пользователя
        x1 = int(input("Введите значение x₁ (неотрицательное целое): "))
        x2 = int(input("Введите значение x₂ (неотрицательное целое): "))

        # Проверка на неотрицательность
        if x1 < 0 or x2 < 0:
            print("Ошибка: значения должны быть неотрицательными целыми числами")
            return
        
        if x1 + x2 < 1:
            print("Ошибка: требуется x₁ + x₂ ≥ 1, иначе f уходит в отрицательное")
            return

        print()

        # Вычисление итеративным способом
        result_imperative = imperative_function(x1, x2)
        print(f"Итеративный способ:   f({x1}, {x2}) = {result_imperative}")

        # Вычисление рекурсивным способом
        result_recursive = recursive_function(x1, x2)
        print(f"Рекурсивный способ:    f({x1}, {x2}) = {result_recursive}")

        # Проверка совпадения результатов
        if result_imperative == result_recursive:
            print("Результаты совпадают!")
        else:
            print("Ошибка: результаты не совпадают!")

        print()

    except ValueError:
        print("Ошибка: введите корректное целое число")
    except KeyboardInterrupt:
        print("\n\nПрограмма прервана пользователем")


if __name__ == "__main__":
    main()
